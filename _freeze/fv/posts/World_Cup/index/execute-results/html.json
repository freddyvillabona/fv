{
  "hash": "6c980b0827d67092a36ab82a043f3869",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexecute:\n  message: false\n  warning: false\n  fig-show: no\ntitle: \"Winning the 2022 World Cup (Top 10 favourites)\"\nauthor: \"FV\"\ndate: \"2022-12-01\"\ncategories: [code, analysis]\nimage: \"cup.png\"\n---\n\n\n\n\n\nWinning the 2022 World Cup\n\n\\- The grey line shows the predictions before the start of the World Cup.\n\n\\- The blue line shows the current predictions.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# LIB\n{\nlibrary(readxl)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(ggflags)\nlibrary(stringr)\nlibrary(hrbrthemes)\n}\n\n# DATA\ncup <- read.csv(\"cup.csv\", sep=\";\", stringsAsFactors = FALSE)\ncup <- cup[with(cup, order(-cup$WIN.WORLD.CUP)), ] \n\n# ORDER\ncup$TEAM <- gsub(\"\\n\",\"\",cup$TEAM)\ncup$TEAM <- gsub(\" \",\"\",cup$TEAM)\ncup$TEAM <- str_replace_all(cup$TEAM,\" \", \"\")  \ncup$TEAM\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] \"Brazil\"      \"Spain\"       \"France\"      \"Argentina\"   \"Portugal\"   \n [6] \"Germany\"     \"England\"     \"Netherlands\" \"Uruguay\"     \"Belgium\"    \n[11] \"Denmark\"     \"Croatia\"     \"Switzerland\" \"USA\"         \"Mexico\"     \n[16] \"Senegal\"     \"Ecuador\"     \"Morocco\"     \"Serbia\"      \"Japan\"      \n[21] \"Canada\"      \"Poland\"      \"SouthKorea\"  \"Tunisia\"     \"Iran\"       \n[26] \"Wales\"       \"Cameroon\"    \"SaudiArabia\" \"Australia\"   \"Qatar\"      \n[31] \"Ghana\"       \"CostaRica\"  \n```\n\n\n:::\n\n```{.r .cell-code}\ncup <- head(cup,10)\nnames(cup)[12] = \"Win\"\n\n\nnew <- c(29.10, 12.00, 12.80, \n         12.90, 8.10, 0, \n         9.40, 6.00, 1.10, 0)\n\ncup2 <- cbind(cup, new)\n\n#PLOT\n\nplot <- ggplot(data=cup2, aes(x= reorder(TEAM, -Win) , y=Win, group=1)) +\n  ggtitle(\"Winning the 2022 World Cup (Top 10 favourites)\") +\n  xlab(\"Country\") +\n  ylab(\"Percentage\") +\n  \n  geom_line(col=\"gray\") +\n  geom_point() +\n  \n  geom_line(data=cup2, aes(x= reorder(TEAM, -new) , y=new, group=1),  col=\"blue\") +\n  geom_point(data=cup2, aes(x= reorder(TEAM, -new) , y=new, group=1)) +\n  \n  geom_text(data=cup2,aes(label=paste(Win, \"%\") ), vjust=2.3, color=\"gray\", size=3.5)+\n  geom_text(data=cup2, \n            aes(x= reorder(TEAM, -new) , y=new, size=18),\n            label=paste(new, \"%\"), vjust=-1.6, color=\"blue\", size=3.5)+\n  geom_flag(data=cup2, aes(x = reorder(TEAM, -Win) , y=-7, country = code), size=15) +\n  theme_ipsum(grid = F, base_family = \"sans\") +\n  labs(subtitle = \"Data: Soccer Power Index (SPI)\") +\n  \n  geom_segment(aes(x=\"France\",\n                   xend = \"Argentina\", \n                   y = 25,\n                   yend = 25),\n               size = 4, \n               col = \"blue\") +\n  \n  geom_segment(aes(x=\"France\",\n                   xend = \"Argentina\", \n                   y = 23,\n                   yend = 23),\n               size = 4,\n               col = \"gray\") +\n  \n  annotate(\"text\", x = \"Germany\", y = 23, label = \"Prediction before the start of the World Cup\") +\n  annotate(\"text\", x = \"Germany\", y = 25, label = \"Current forecast (Thu 1 Dec 22:18 GMT+1)\")\n\n# plot\n```\n:::\n\n\n\n\n\n![](cup.png)\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}